<!DOCTYPE html>
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html>
<head>

  <title>目录数据项管理 | 武汉征信中心归集系统</title>
  @@include('inc/meta.html')
</head>
<body class="hold-transition skin-green sidebar-mini">
<div class="wrapper">

  @@include('inc/header.html')
  <!-- Left side column. contains the logo and sidebar -->
  <aside class="main-sidebar">

    <!-- sidebar: style can be found in sidebar.less -->
    <section class="sidebar">


      <!-- Sidebar Menu -->
      <ul class="sidebar-menu">
        <li class="header">信用目录管理功能菜单</li>
        <li><a href="./catalog.html"><i class="fa fa-list" style="color: green;"></i> <span>目录事项管理</span></a></li>
        <li class="active"><a href="./indicator.html"><i class="fa fa-file-text" style="color: green;"></i> <span>目录数据项管理</span></a></li>
        <li><a href="./source.html"><i class="fa fa-bank" style="color: green;"></i> <span>信源单位管理</span></a></li>
      </ul>
      <!-- /.sidebar-menu -->
    </section>
    <!-- /.sidebar -->
  </aside>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>
        <i class="fa fa-file-text"></i> 目录数据项管理
      </h1>
    </section>

    <!-- Main content -->
    <section class="content">

      <div id="splitter">
        <div>
          <div style="visibility: hidden; border: none;" id='creditCatalogTree'></div>
        </div>
        <div id="ContentPanel" style="overflow: auto;margin: 5px;">
          <div id='jqxWidget' style="font-size: 12px; font-family: Verdana; float: left;">

            <div class="box box-success">
              <div class="box-header with-border">
                <h3 id="indicatorList" class="box-title">目录事项信息</h3>
                <!-- /.box-tools -->
              </div>
              <!-- /.box-header -->
              <div class="box-body">
                <div id="indicatorGrid"></div>
              </div>
              <!-- /.box-body -->
            </div>

            <div class="box box-success">
              <div class="box-header with-border">
                <h3 id="indicatorDetailList" class="box-title">目录数据项信息</h3>
              </div>
              <!-- /.box-header -->
              <div class="box-body">
                <div id="indicatorDetailsGrid"></div>
              </div>
              <!-- /.box-body -->
            </div>
          </div><!-- jqxWidget -->
        </div>
      </div>


    </section>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->

  @@include('inc/footer.html')

</div>
<!-- ./wrapper -->

@@include('inc/jslib.html')

<script type="text/javascript">
  $(document).ready(function () {
    // Create jqxTree
    $("#splitter").jqxSplitter({  width: 900, height: 600, panels: [{ size: 300}, { size: 600 }] });

    $('#creditCatalogTree').jqxTree({  height: '100%', width: '100%' });
    $('#creditCatalogTree').css('visibility', 'visible');
    $('#creditCatalogTree').jqxTree({ source: creditCatalogRecords, width: '300px'});

    // prepare the data
    var dataIndicator = new Array();
    var dataIndicatorDetails = new Array();

    var indicatorTypeCode = ["BC01001"];
    var indicatorCode = ["B04007"];
    var indicatorName = ["武汉市名校长评审认定"];
    var indicatorStructure = ["多项"];
    var reportSign = ["信用报告项"];
    var publishSign = ["允许披露"];
    var sharingSign = ["允许披露"];
    var englishDesc = [""];
    var remark = [""];

    var indicatorCodes = ["B07024","B07024","B07024","B07024","B07024","B07024","B07024","B07024","B07024","B07024","B07024"];
    var detailCode = ["A01001","A01002","A01003","A01004","A01005","A01006","A01007","A01008","A01009","A01010","A01011"];
    var detailName = ["姓名","证件名称","证件号码","性别","认定日期","认定文号","认定内容","工作单位","职务","学历","联系电话"];
    var storeType = ["","","","","","","","","","",""];
    var storeLocation = ["ods_a01","ods_a01","ods_a01","ods_a01","ods_a01","ods_a01","ods_a01","ods_a01","ods_a01","ods_a01","ods_a01"];
    var storeProperty = ["a01001","a01002","a01003","a01004","a01005","a01006","a01007","a01008","a01009","a01010","a01011"];
    var storeFormat = ["字符串","字符串","字符串","字符串","日期","字符串","字符串","字符串","字符串","字符串","字符串"];
    var codeName = ["","","","","","","","","","",""];
    var detailEnglishDesc = ["","","","","","","","","","",""];
    var detailRemark = ["","","","","","","","","","",""];
    var notes = ["无","无","无","无","无","无","无","无","无","无","无"];

    var j = 0;
    for (var i = 0; i < indicatorTypeCode.length; i++) {
      var row = {};
      row["indicatorTypeCode"] = indicatorTypeCode[j];
      row["indicatorCode"] = indicatorCode[j];
      row["indicatorName"] = indicatorName[j];
      row["indicatorStructure"] = indicatorStructure[j];
      row["reportSign"] = reportSign[j];
      row["publishSign"] = publishSign[j];
      row["sharingSign"] = sharingSign[j];
      row["englishDesc"] = englishDesc[j];
      row["remark"] = remark[j];
      row["notes"] = notes[j];
      dataIndicator[i] = row;
      j++;
    }

    var k = 0;
    for (var i = 0; i < indicatorCodes.length; i++) {
      var row = {};
      row["indicatorCodes"] = indicatorCodes[k];
      row["detailCode"] = detailCode[k];
      row["detailName"] = detailName[k];
      row["storeType"] = storeType[k];
      row["storeLocation"] = storeLocation[k];
      row["storeProperty"] = storeProperty[k];
      row["storeFormat"] = storeFormat[k];
      row["codeName"] = codeName[k];
      row["detailEnglishDesc"] = detailEnglishDesc[k];
      row["detailRemark"] = detailRemark[k];
      row["notes"] = notes[k];
      dataIndicatorDetails[i] = row;
      k++;
    }

    var sourceIndicator =
    {
      localdata: dataIndicator,
      datatype: "array",
      pager: function (pagenum, pagesize, oldpagenum) {
        // callback called when a page or page size is changed.
      }
    };

    var sourceIndicatorDetails =
    {
      localdata: dataIndicatorDetails,
      datatype: "array",
      pager: function (pagenum, pagesize, oldpagenum) {
        // callback called when a page or page size is changed.
      }
    };

    var indicatorInfo = function (index, parentElement, gridElement, datarecord) {
      var tabsdiv = null;
      var information = null;
      var notes = null;
      tabsdiv = $($(parentElement).children()[0]);
      if (tabsdiv != null) {
        information = tabsdiv.find('.information');
        notes = tabsdiv.find('.notes');
        var title = tabsdiv.find('.title');
        title.text(datarecord.indicatorName);

        var container = $('<div style="margin: 5px;"></div>')
        container.appendTo($(information));
        // var photocolumn = $('<div style="float: left; width: 15%;"></div>');
        var leftcolumn = $('<div style="float: left; width: 50%;"></div>');
        var rightcolumn = $('<div style="float: left; width: 50%;"></div>');
        // container.append(photocolumn);
        container.append(leftcolumn);
        container.append(rightcolumn);

        // var photo = $("<div class='jqx-rc-all' style='margin: 10px;'><b>Photo:</b></div>");
        // var image = $("<div style='margin-top: 10px;'></div>");
        // var imgurl = '../../images/' + datarecord.firstname.toLowerCase() + '.png';
        // var img = $('<img height="60" src="' + imgurl + '"/>');
        // image.append(img);
        // image.appendTo(photo);
        // photocolumn.append(photo);

        var indicatorTypeCode = "<div style='margin: 10px;'><b>指标分类代码：</b> " + datarecord.indicatorTypeCode + "</div>";
        var indicatorName = "<div style='margin: 10px;'><b>指标名称：</b> " + datarecord.indicatorName + "</div>";
        var indicatorStructure = "<div style='margin: 10px;'><b>组成结构：</b> " + datarecord.indicatorStructure + "</div>";
        var publishSign = "<div style='margin: 10px;'><b>披露标志：</b> " + datarecord.publishSign + "</div>";
        var remark = "<div style='margin: 10px;'><b>其他说明：</b> " + datarecord.remark + "</div>";
        $(leftcolumn).append(indicatorTypeCode);
        $(leftcolumn).append(indicatorName);
        $(leftcolumn).append(indicatorStructure);
        $(leftcolumn).append(publishSign);
        $(leftcolumn).append(remark);

        var indicatorCode = "<div style='margin: 10px;'><b>指标代码：</b> " + datarecord.indicatorCode + "</div>";
        var englishDesc = "<div style='margin: 10px;'><b>英文描述：</b> " + datarecord.englishDesc + "</div>";
        var reportSign = "<div style='margin: 10px;'><b>信用报告标志：</b> " + datarecord.reportSign + "</div>";
        var sharingSign = "<div style='margin: 10px;'><b>行业开放标志：</b> " + datarecord.sharingSign + "</div>";

        $(rightcolumn).append(indicatorCode);
        $(rightcolumn).append(englishDesc);
        $(rightcolumn).append(reportSign);
        $(rightcolumn).append(sharingSign);

        var notescontainer = $('<div style="white-space: normal; margin: 5px;"><span>' + datarecord.notes + '</span></div>');
        $(notes).append(notescontainer);
        $(tabsdiv).jqxTabs({ width: 520, height: 180});
      }
    };

    var indicatorDetailsInfo = function (index, parentElement, gridElement, datarecord) {
      var tabsdiv = null;
      var information = null;
      var notes = null;
      tabsdiv = $($(parentElement).children()[0]);
      if (tabsdiv != null) {
        information = tabsdiv.find('.information');
        notes = tabsdiv.find('.notes');
        var title = tabsdiv.find('.title');
        title.text(datarecord.detailName);

        var container = $('<div style="margin: 5px;"></div>')
        container.appendTo($(information));
        // var photocolumn = $('<div style="float: left; width: 15%;"></div>');
        var leftcolumn = $('<div style="float: left; width: 50%;"></div>');
        var rightcolumn = $('<div style="float: left; width: 50%;"></div>');
        // container.append(photocolumn);
        container.append(leftcolumn);
        container.append(rightcolumn);

        // var photo = $("<div class='jqx-rc-all' style='margin: 10px;'><b>Photo:</b></div>");
        // var image = $("<div style='margin-top: 10px;'></div>");
        // var imgurl = '../../images/' + datarecord.firstname.toLowerCase() + '.png';
        // var img = $('<img height="60" src="' + imgurl + '"/>');
        // image.append(img);
        // image.appendTo(photo);
        // photocolumn.append(photo);

        var indicatorCodes = "<div style='margin: 10px;'><b>指标代码：</b> " + datarecord.indicatorCodes + "</div>";
        var detailName = "<div style='margin: 10px;'><b>指标项名称：</b> " + datarecord.detailName + "</div>";
        var storeType = "<div style='margin: 10px;'><b>存储类型：</b> " + datarecord.storeType + "</div>";
        var storeProperty = "<div style='margin: 10px;'><b>存储属性：</b> " + datarecord.storeProperty + "</div>";
        var storeFormat = "<div style='margin: 10px;'><b>数据存储格式：</b> " + datarecord.storeFormat + "</div>";
        $(leftcolumn).append(indicatorCodes);
        $(leftcolumn).append(detailName);
        $(leftcolumn).append(storeType);
        $(leftcolumn).append(storeProperty);
        $(leftcolumn).append(storeFormat);

        var detailCode = "<div style='margin: 10px;'><b>指标项代码：</b> " + datarecord.detailCode + "</div>";
        var detailEnglishDesc = "<div style='margin: 10px;'><b>英文描述：</b> " + datarecord.detailEnglishDesc + "</div>";
        var storeLocation = "<div style='margin: 10px;'><b>存储位置：</b> " + datarecord.storeLocation + "</div>";
        var codeName = "<div style='margin: 10px;'><b>代码名称：</b> " + datarecord.codeName + "</div>";
        var detailRemark = "<div style='margin: 10px;'><b>其他说明：</b> " + datarecord.detailRemark + "</div>";
        $(rightcolumn).append(detailCode);
        $(rightcolumn).append(detailEnglishDesc);
        $(rightcolumn).append(storeLocation);
        $(rightcolumn).append(codeName);
        $(rightcolumn).append(detailRemark);

        var notescontainer = $('<div style="white-space: normal; margin: 5px;"><span>' + datarecord.notes + '</span></div>');
        $(notes).append(notescontainer);
        $(tabsdiv).jqxTabs({ width: 520, height: 180});
      }
    };

    var dataAdapterIndicator = new $.jqx.dataAdapter(sourceIndicator);
    var dataAdapterIndicatorDetails = new $.jqx.dataAdapter(sourceIndicatorDetails);

    $("#indicatorGrid").jqxGrid(
      {
        width: 554,
        height: 300,
        // source: dataAdapter,
        pageable: true,
        // selectionmode: 'multiplerowsextended',
        sortable: true,
        rowdetails: true,
        autoheight: true,
        columnsresize: true,
        rowdetailstemplate: { rowdetails: "<div style='margin: 10px;'><ul style='margin-left: 10px;'><li class='title'></li><li>备注</li></ul><div class='information'></div><div class='notes'></div></div>", rowdetailsheight: 200 },
        ready: function () {
          // $("#indicatorGrid").jqxGrid('showrowdetails', 0);
          // $("#indicatorGrid").jqxGrid('showrowdetails', 1);
        },
        initrowdetails: indicatorInfo,
        columns: [
          { text: '指标代码', datafield: 'indicatorCode', width: 80 },
          { text: '指标名称', datafield: 'indicatorName', width: 80 },
          { text: '组成结构', datafield: 'indicatorStructure', width: 80 },
          { text: '信用报告标志', datafield: 'reportSign', width: 80 },
          { text: '披露标志', datafield: 'publishSign', width: 80},
          { text: '行业开放标志', datafield: 'sharingSign'}
        ]
      });

    $("#indicatorDetailsGrid").jqxGrid(
      {
        width: 554,
        height: 300,
        // source: dataAdapter,
        pageable: true,
        // selectionmode: 'multiplerowsextended',
        sortable: true,
        rowdetails: true,
        autoheight: true,
        columnsresize: true,
        rowdetailstemplate: { rowdetails: "<div style='margin: 10px;'><ul style='margin-left: 10px;'><li class='title'></li><li>备注</li></ul><div class='information'></div><div class='notes'></div></div>", rowdetailsheight: 200 },
        ready: function () {
          // $("#indicatorDetailsGrid").jqxGrid('showrowdetails', 0);
          // $("#indicatorDetailsGrid").jqxGrid('showrowdetails', 1);
        },
        initrowdetails: indicatorDetailsInfo,
        columns: [
          { text: '指标项代码', datafield: 'detailCode', width: 80 },
          { text: '指标项名称', datafield: 'detailName', width: 80 },
          { text: '存储类型', datafield: 'storeType', width: 80 },
          { text: '存储位置', datafield: 'storeLocation', width: 80 },
          { text: '存储属性', datafield: 'storeProperty', width: 80},
          { text: '数据存储格式', datafield: 'storeFormat'}
        ]
      });

    $('#creditCatalogTree').on('select', function (event) {
      $("#indicatorGrid").jqxGrid('source', dataAdapterIndicator);
      $("#indicatorDetailsGrid").jqxGrid('source', dataAdapterIndicatorDetails);
    });

  });
</script>

<!-- Optionally, you can add Slimscroll and FastClick plugins.
     Both of these plugins are recommended to enhance the
     user experience. Slimscroll is required when using the
     fixed layout. -->
</body>
</html>


